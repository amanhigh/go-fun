# This code is licensed under the terms of the MIT license https://opensource.org/license/mit
# Copyright (c) 2021 Marat Reymers

## Golden config for golangci-lint v1.55.2
#
# This is the best config for golangci-lint based on my experience and opinion.
# It is very strict, but not extremely strict.
# Feel free to adapt and change it for your needs.
# Source: https://gist.github.com/maratori/47a4d00457a92aa426dbd48a18776322

# Essential linters configuration focused on catching bugs and maintainability
# Removed deprecated linters and simplified configuration to essential checks

run:
  timeout: 3m

linters-settings:
  govet:
    enable-all: true
    disable:
      - fieldalignment # too strict

  errcheck:
    check-type-assertions: true

linters:
  disable-all: true
  enable:
    # FIXME: #A Strengthen linters and fix issues.
    # High Priority - Code Correctness & Bugs
    - errcheck      # critical error checking
    - govet        # suspicious constructs
    # - staticcheck  # advanced static analysis
    # - gosimple     # code simplification
    - typecheck    # type checking
    
    # Safety & Resources
    # - bodyclose      # ensure http response closed
    - nilerr        # nil error returns
    - sqlclosecheck # ensure sql resources closed
    - noctx        # enforce context usage
    
    # Code Style Essentials
    - goimports     # import sorting + gofmt
    # - revive        # general style (golint replacement)
    - unused        # unused code detection

    # Consider enabling these linters later:
    # - exhaustive     # enum switch statements
    # - gosec         # security checks
    - errorlint     # error wrapping (Go 1.13+)
    # - testifylint   # testify best practices
    - whitespace    # ws formatting

issues:
  # Maximum count of issues with the same text
  max-same-issues: 50

  # Excluding specific rules for test files
  exclude-rules:
    - path: "_test\\.go"
      linters:
        - bodyclose   # ignore response body closes in tests
        - noctx      # ignore missing context in tests
  exclude-dirs:
    - "^components/"